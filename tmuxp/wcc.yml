session_name: wcc
windows:
  - window_name: code
    start_directory: ~/projects/wecancomply
    panes:
      - shell_command:
        - cmd: pyenv activate wecancomply
  - window_name: jupyter
    start_directory: ~/projects
    panes:
      - shell_command:
        - cmd: pyenv activate jupyter
          sleep_before: 1
          sleep_after: 1
        - cmd: jupyter notebook --no-browser
  - window_name: docker
    start_directory: ~/projects/wecancomply/docker
    panes:
      - "docker-compose up --build"
  - window_name: frontend
    start_directory: ~/projects/wecancomply/platform/frontend-core
    panes:
      - shell_command:
        - "npm i"
        - "npm run dev"
  - window_name: apps
    start_directory: ~/projects/wecancomply/platform
    layout: even-horizontal
    shell_command_before: pyenv activate wecancomply
    panes:
      - shell_command:
          - "cd backend-core/src/"
          - "python manage.py runserver 127.0.0.1:8000"
      - shell_command:
          - "cd backend-directory/src/"
          - "python manage.py runserver 127.0.0.1:8001"
      - shell_command:
          - "cd backend-workspaces/src/"
          - "python manage.py runserver 127.0.0.1:8002"
  - window_name: taskers
    start_directory: ~/projects/wecancomply/platform
    layout: even-horizontal
    shell_command_before: pyenv activate wecancomply
    panes:
      - shell_command:
          - "cd backend-core/src/"
          - "celery -A app worker -l INFO"
      - shell_command:
          - "cd backend-directory/src/"
          - "celery -A app worker -l INFO"
      - shell_command:
          - "cd backend-workspaces/src/"
          - "celery -A app worker -l INFO"
